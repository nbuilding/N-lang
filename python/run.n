import times
import websocket // Used for connecting to WebSockets

let pub main = () |> ([] -> cmd[()] {
	let websocketTest = websocket.connect({
		onOpen: [send: websocket.send] -> cmd[bool] {
			print("Open!")
			let _ = send("hi")!
			while (true) {
				let _ = times.sleep(10000)!
			}
			return true
		}
		onMessage: [send: websocket.send message: str] -> cmd[bool] {
			print(message)
			let _ = send("hello")!
			return message == "hello"
		}
	}, "wss://echo.websocket.org")!
})
